# Last Ant Standing on a Stick with Variable Speeds and Exact Collision Simulation

## Problem:
You have **N ants** placed at distinct positions on a stick of arbitrary length `L`. Each ant:
- Has a unique speed (not necessarily 1),
- Moves either left or right initially,
- Collides elastically with others meaning they reverse directions on collision,
- Fall off when they reach the ends of the stick (0 or L).

You must write a program to:

1. Calculate the **exact time** when the last ant falls off.
2. Identify the **ID of the last ant** to fall off the stick.
3. Efficiently compute collision times and simulate ant movements and collisions without naïve time-step simulation (which would be too slow for large N).
4. Handle the fact that ants swap velocities and directions on collision, and preserve correct ID tracking through these events.

---

## Inputs:
- An integer `N`: number of ants.
- A float `L`: length of the stick.
- A list of ants, each with:
  - A unique integer or string `id`
  - A float `pos` (initial position, `0 < pos < L`)
  - A direction (`"left"` or `"right"`)
  - A float `speed` (positive real number)

---

## Output:
Return:
- The ID of the last ant to fall off,
- The exact time when it falls off.

---

## Constraints & Considerations:
- Positions are distinct real numbers within `(0, L)`.
- Speeds vary — no assumption that speeds are identical or 1.
- Ants reverse direction and swap speeds/IDs upon collision.
- Must devise a data structure or algorithm that calculates collision times efficiently, handles events in chronological order, and tracks ant IDs correctly.
- The program should be optimized enough to handle large `N` (e.g., thousands) without simulating every tiny time increment.

---

## Example:
Input:
N = 3
L = 10.0
ants = [
{"id": 1, "pos": 2.0, "dir": "right", "speed": 1.5},
{"id": 2, "pos": 5.0, "dir": "left", "speed": 1.0},
{"id": 3, "pos": 8.0, "dir": "left", "speed": 2.0}
]

Output:
Last ant ID: 3
Time: 6.0

---

## Hint:
- Model the problem as a priority queue of events (collisions and falls).
- Calculate next collision times between ants and next fall times to ends.
- When a collision occurs, update directions and velocities and schedule next events accordingly.
- Track IDs through speed/direction swaps.
- Use a simulation driven by event queue rather than step-by-step.

---



---


