# Last Ant Standing on a Stick with Variable Speeds, Masses, and Elastic Collisions â€” Full Physics Simulation

## Problem Statement

You are given **N ants** on a stick of length **L**. Each ant has the following properties:

- A unique ID
- An initial position (0 < pos < L)
- An initial direction: left or right
- A mass (positive real number)
- A speed (positive real number)

They move continuously along the stick at their speeds. When ants collide, they undergo **perfectly elastic collisions** that obey the laws of physics:

- Velocities change according to conservation of momentum and kinetic energy.
- Directions and speeds are updated accordingly after collision.
- Ants swap their velocities during a collision following physics.
- Ants fall off and disappear when reaching 0 or L.

## Tasks

1. Calculate the **exact time** the last ant falls off the stick.
2. Determine the **ID** of this last ant.
3. Implement an **event-driven simulation** driven by collision and fall events to handle large N efficiently.
4. Track ants' IDs through collisions, as their velocities change and ants effectively swap motions.
5. Avoid brute-force time stepping simulation.

## Input

- Integer `N`: Number of ants.
- Float `L`: Length of the stick.
- List of ants, each with:
  - Unique `id` (integer or string)
  - Initial position `pos` (float, 0 < pos < L)
  - Direction `dir` ("left" or "right")
  - Mass `mass` (positive float)
  - Speed `speed` (positive float)

## Output

- The `id` of the last ant to fall off.
- The exact time when it falls off.

## Constraints & Considerations

- Positions of ants are distinct real numbers strictly inside `(0, L)`.
- Speeds and masses can vary per ant.
- Collisions are perfectly elastic and conserve both momentum and kinetic energy.
- On collision, velocities update using physics formulas.
- Events should be processed efficiently in chronological order using a priority queue.
- The simulation must track IDs faithfully as ants exchange velocities and directions.
- The solution must scale to large `N` without naive step-wise simulation.

## Example

Input:
N = 3
L = 10.0
ants = [
{"id": 1, "pos": 2.0, "dir": "right", "mass": 1.0, "speed": 1.5},
{"id": 2, "pos": 5.0, "dir": "left", "mass": 2.0, "speed": 1.0},
{"id": 3, "pos": 8.0, "dir": "left", "mass": 1.5, "speed": 2.0}
]

Output:
Last ant ID: 3
Time: 9.0000
---

This problem challenges your mastery of event-driven simulation, elastic collision physics in one dimension, and efficient algorithm design for quantitative programming interviews.
