# Full Solution: Multi-Asset Optimal Portfolio and Derivative Pricing under Stochastic Jump-Volatility with PIDEs

## Mathematical Model

Let there be N assets \( S^i_t \), described by jump-diffusion with stochastic volatility:
\[
dS^i_t/S^i_t = (\mu_i - \lambda_i\mathbb{E}[e^{Y^i}] + \lambda_i)dt + \sqrt{v^i_t} dW^i_t + dJ^i_t
\]
\[
dv^i_t = \kappa_i(\theta_i - v^i_t) dt + \eta_i \sqrt{v^i_t} dZ^i_t + dK^i_t
\]
- \( W^i \): correlated Brownian motions
- \( J^i_t \): jump component (Poisson; double-exponential sizes)
- \( v^i_t \): stochastic variance

Jump intensity \( \lambda_i \), jump size distribution \( Y^i \).
Correlation handled via covariance matrix for \( W^i \) and correlated jumps.

**Portfolio optimization** (CRRA utility) satisfies a PIDE for the value function \( V \):
\[
\frac{\partial V}{\partial t} + \max_{\pi, c} \left[ \mathcal{L}V + U(c) + \int (V(\text{jumped state}) - V) d\mathbb{P} \right] = 0
\]
where:
- \( \mathcal{L} \): infinitesimal generator for local terms,
- integral for jumps.

**We solve via:**
- Monte Carlo for simulation/derivative pricing,
- Finite difference/quadrature or Fourier PROJ for PIDEs,
- Optimization for calibration.

---

## Implementation Plan

1. **Model Definition**  
   Encapsulate multi-asset jump-stochastic volatility.

2. **Path Simulation (Monte Carlo)**  
   Simulate asset price paths; jumps and stochastic vol.

3. **Portfolio Risk Metrics**  
   Compute terminal payoffs for portfolio, VaR/CVaR.

4. **Derivative Pricing**  
   Asian/barrier option pricing via simulation.

5. **Model Calibration**  
   Fit parameters to market data by optimization.

6. **PIDE Pointer**  
   Pseudo-code for finite difference + quadrature for optimal policies.

---

## Files and Modules

- `jump_stoch_vol_model.py`: Model and simulation class
- `pricing_and_risk.py`: Functions for derivative pricing and risk
- `calibration.py`: Calibration routine
- `pide_solver.py`: PIDE scheme skeleton (advanced)
- `README.md`: Problem and mathematical background

---
